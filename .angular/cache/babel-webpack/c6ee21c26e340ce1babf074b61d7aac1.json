{"ast":null,"code":"import { EventEmitter } from '@angular/core';\nimport { DialogComponent } from \"../dialog/dialog.component\";\nimport { ImageDialogComponent } from \"../image-dialog/image-dialog.component\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/material/dialog\";\nimport * as i2 from \"../providers/backend.service\";\nimport * as i3 from \"../providers/auth.service\";\nimport * as i4 from \"../size-detector/resize.service\";\nimport * as i5 from \"@angular/common\";\nimport * as i6 from \"@angular/router\";\nimport * as i7 from \"@angular/material/icon\";\n\nfunction ContentItemComponent_h5_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"h5\", 8);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r0.item.title, \" \");\n  }\n}\n\nfunction ContentItemComponent_p_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\", 9);\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"date\");\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(2, 1, ctx_r1.item.date));\n  }\n}\n\nfunction ContentItemComponent_img_4_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r6 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"img\", 10);\n    i0.ɵɵlistener(\"click\", function ContentItemComponent_img_4_Template_img_click_0_listener() {\n      i0.ɵɵrestoreView(_r6);\n      const ctx_r5 = i0.ɵɵnextContext();\n      return ctx_r5.openImageDialog(ctx_r5.item.imgLink);\n    });\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵpropertyInterpolate(\"src\", ctx_r2.item.imgLink, i0.ɵɵsanitizeUrl);\n  }\n}\n\nfunction ContentItemComponent_p_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\", 11);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r3.item.text);\n  }\n}\n\nconst _c0 = function (a1) {\n  return [\"edit\", a1];\n};\n\nfunction ContentItemComponent_div_7_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r8 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 12);\n    i0.ɵɵelementStart(1, \"div\", 13);\n    i0.ɵɵelementStart(2, \"a\", 14);\n    i0.ɵɵelementStart(3, \"mat-icon\");\n    i0.ɵɵtext(4, \"edit\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"a\", 15);\n    i0.ɵɵlistener(\"click\", function ContentItemComponent_div_7_Template_a_click_5_listener() {\n      i0.ɵɵrestoreView(_r8);\n      const ctx_r7 = i0.ɵɵnextContext();\n      return ctx_r7.openDeleteDialog(ctx_r7.item);\n    });\n    i0.ɵɵelementStart(6, \"mat-icon\");\n    i0.ɵɵtext(7, \"delete\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r4 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction1(1, _c0, ctx_r4.item.id));\n  }\n}\n\nexport let ContentItemComponent = /*#__PURE__*/(() => {\n  class ContentItemComponent {\n    constructor(dialog, backendService, authService, resizeService) {\n      this.dialog = dialog;\n      this.backendService = backendService;\n      this.authService = authService;\n      this.resizeService = resizeService;\n      this.newItems = new EventEmitter();\n      this.loadingFinished = false;\n    }\n\n    ngOnInit() {\n      this.size = this.resizeService.current;\n      this.resizeService.onResize$.subscribe(size => {\n        this.size = size;\n      });\n      setTimeout(() => {\n        this.loadingFinished = true;\n      }, 500);\n    }\n\n    openDeleteDialog(item) {\n      const dialogRef = this.dialog.open(DialogComponent, {\n        width: '350px',\n        data: item\n      });\n      dialogRef.afterClosed().subscribe(result => {\n        if (result) {\n          this.backendService.deletePost(item).catch(error => {\n            this.authService.logout();\n          });\n          this.backendService.getAllPosts();\n          this.newItems.emit();\n        }\n      });\n    }\n\n    loggedIn() {\n      return this.authService.isLoggedIn();\n    }\n\n    openImageDialog(imgLink) {\n      if (this.size > 0) {\n        const imageDialogRef = this.dialog.open(ImageDialogComponent, {\n          width: 'auto',\n          panelClass: 'image-dialog',\n          data: {\n            imgLink\n          }\n        });\n      }\n    }\n\n  }\n\n  ContentItemComponent.ɵfac = function ContentItemComponent_Factory(t) {\n    return new (t || ContentItemComponent)(i0.ɵɵdirectiveInject(i1.MatDialog), i0.ɵɵdirectiveInject(i2.BackendService), i0.ɵɵdirectiveInject(i3.AuthService), i0.ɵɵdirectiveInject(i4.ResizeService));\n  };\n\n  ContentItemComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: ContentItemComponent,\n    selectors: [[\"app-content-item\"]],\n    inputs: {\n      item: \"item\"\n    },\n    outputs: {\n      newItems: \"newItems\"\n    },\n    decls: 8,\n    vars: 8,\n    consts: [[1, \"card\", \"opacity-0\", 3, \"id\"], [1, \"card-header\"], [\"class\", \"card-title\", 4, \"ngIf\"], [\"class\", \"card-subtitle\", 4, \"ngIf\"], [\"class\", \"card-img\", \"alt\", \"Picture\", 3, \"src\", \"click\", 4, \"ngIf\"], [1, \"card-body\"], [\"class\", \"card-text\", 4, \"ngIf\"], [\"class\", \"container\", 4, \"ngIf\"], [1, \"card-title\"], [1, \"card-subtitle\"], [\"alt\", \"Picture\", 1, \"card-img\", 3, \"src\", \"click\"], [1, \"card-text\"], [1, \"container\"], [1, \"row\", \"justify-content-start\"], [1, \"card-link\", 3, \"routerLink\"], [1, \"card-link\", 3, \"click\"]],\n    template: function ContentItemComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵelementStart(1, \"div\", 1);\n        i0.ɵɵtemplate(2, ContentItemComponent_h5_2_Template, 2, 1, \"h5\", 2);\n        i0.ɵɵtemplate(3, ContentItemComponent_p_3_Template, 3, 3, \"p\", 3);\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(4, ContentItemComponent_img_4_Template, 1, 1, \"img\", 4);\n        i0.ɵɵelementStart(5, \"div\", 5);\n        i0.ɵɵtemplate(6, ContentItemComponent_p_6_Template, 2, 1, \"p\", 6);\n        i0.ɵɵtemplate(7, ContentItemComponent_div_7_Template, 8, 3, \"div\", 7);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵclassProp(\"opacity-100\", ctx.loadingFinished);\n        i0.ɵɵproperty(\"id\", ctx.item.id);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", !!ctx.item.title);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", !!ctx.item.date);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", !!ctx.item.imgLink);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", !!ctx.item.text);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.loggedIn());\n      }\n    },\n    directives: [i5.NgIf, i6.RouterLinkWithHref, i7.MatIcon],\n    pipes: [i5.DatePipe],\n    styles: [\".card[_ngcontent-%COMP%]{border-radius:4px;border:none;box-shadow:0 0 4px #171a1d}@media (max-width: 576px){.card[_ngcontent-%COMP%]{border-radius:0}}.card-header[_ngcontent-%COMP%]{background-color:#fff;border:none;padding-bottom:0}.card-header[_ngcontent-%COMP%]   .card-title[_ngcontent-%COMP%]{margin-bottom:5px;font-family:Google Sans,Roboto,sans-serif;font-size:17px;font-weight:500;letter-spacing:.7px;text-transform:capitalize}.card-header[_ngcontent-%COMP%]   .card-subtitle[_ngcontent-%COMP%]{margin-bottom:5px;color:#0c5460;font-size:12px}.card-body[_ngcontent-%COMP%]   .card-text[_ngcontent-%COMP%]{color:#37404e;font-family:Segoe UI,Lato,Arial,Noto Sans,sans-serif;font-size:14px;font-weight:400;letter-spacing:.4px}.card-body[_ngcontent-%COMP%]   .card-link[_ngcontent-%COMP%]{cursor:pointer}.card-img[_ngcontent-%COMP%]{width:100%;border-radius:0}.opacity-0[_ngcontent-%COMP%]{opacity:0;transition:opacity .45s ease}.opacity-100[_ngcontent-%COMP%]{opacity:100%;transition:opacity .45s ease}\"]\n  });\n  return ContentItemComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}